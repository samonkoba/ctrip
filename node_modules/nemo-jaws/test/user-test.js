/*global describe:true, it:true, before:true, after:true */
"use strict";

var assert = require('assert'),
    Nemo = require('nemo'),
    nemo = {};

describe('@nemo-jaws.user@', function () {
    before(function (done) {
        nemo = Nemo(function (err) {
            if (err !== null) {
                done(err);
                return;
            }
            done();
        });
    });
    after(function (done) {
        nemo.driver.quit();
        done();
    });

    it('should create a user, do a get on that user, do a put on that user', function (done) {
        var email = '';
        var accountNumber = 0;
        nemo.jaws({
            restPath: '/user',
            method: 'post',
            data: {
                'country': 'US'
            }
        }).then(function(user) {
            email = user.emailAddress;
            accountNumber = user.accountNumber;
            return nemo.jaws({
                restPath: '/user/findByEmail',
                method: 'get',
                parameters: {
                    emailAddress: email
                }
            });
        }).then(function(user) {
            assert.equal(user.emailAddress, email);
            /*return nemo.jaws({  //need to find out if PUT should work for any fields
                restPath: '/user/${accountNumber}',
                data: {
                    securityAnswer1: 'Petey'
                },
                method: 'put',
                path: {
                    accountNumber: accountNumber
                }
            });
        }).then(function(user) {
            assert.equal(user.securityAnswer1, 'Petey');  */
            done();
        }, function (err) {
            done(err);
        });
    });

});


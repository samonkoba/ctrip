/*global describe:true, it:true, before:true, after:true */
"use strict";

var assert = require('assert'),
	nemo = {},
    Nemo = require('nemo');

describe('@nemo-jaws.query@', function () {
    before(function (done) {
        nemo = Nemo(function (err) {
            if (err !== null) {
                done(err);
                return;
            }
            done();
        });
    });
    after(function (done) {
        nemo.driver.quit();
        done();
    });
    it('should properly run a query', function (done) {
        var email = '';
        var accountNumber = 0;
        return nemo.jaws({
            restPath: '/database/${databaseName}/query',
            method: 'post',
            path: {
                databaseName: 'RUSER'
            },
            data: {
                sqlQuery: 'select * from wuser_norm_address where rownum<10'
            }
        }).then(function(data) {
            assert.ok(data && data.row && data.row.length && data.row.length == 9);

            done();
        }, function (err) {
            done(err);
        });
    });
});

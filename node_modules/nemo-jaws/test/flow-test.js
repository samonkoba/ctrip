/*global describe:true, it:true, before:true, after:true */
"use strict";

var assert = require('assert'),
    Nemo = require('nemo'),
    nemo = {};

describe('@nemo-jaws.flow@', function () {
    before(function (done) {
        nemo = Nemo(function (err) {
            if (err !== null) {
                done(err);
                return;
            }
            done();
        });
    });
    after(function (done) {
        nemo.driver.quit();
        done();
    });

    it('should execute in order when commands written synchronously', function (done) {
        var order = [];
        nemo.jaws({
            restPath: '/user',
            method: 'post',
            data: {
                'country': 'US'
            }
        }).then(function(user) {
            order.push(1);
        });
        nemo.driver.get('https://www.google.com').then(function() {
            order.push(2);
        });
        nemo.jaws({
            restPath: '/user',
            method: 'post',
            data: {
                'country': 'US'
            }
        }).then(function(user) {
            order.push(3);
            return order;
        }).then(function (_order) {
           assert.deepEqual(_order, [1, 2, 3]);
        }).then(function () {
            done()
        }, function (err) {
            done(err);
        });
        //.then(function(user) {
        //    assert.equal(user.emailAddress, email);
        //    /*return nemo.jaws({  //need to find out if PUT should work for any fields
        //        restPath: '/user/${accountNumber}',
        //        data: {
        //            securityAnswer1: 'Petey'
        //        },
        //        method: 'put',
        //        path: {
        //            accountNumber: accountNumber
        //        }
        //    });
        //}).then(function(user) {
        //    assert.equal(user.securityAnswer1, 'Petey');  */
        //    done();
        //}, function (err) {
        //    done(err);
        //});
    });

});

